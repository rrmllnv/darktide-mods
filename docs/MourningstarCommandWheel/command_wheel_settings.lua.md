# command_wheel_settings.lua - Документация

## Описание файла

Файл настроек визуального оформления колеса команд. Содержит все параметры для настройки размеров, цветов, анимаций и поведения колеса.

## Структура настроек

Файл возвращает объект настроек через функцию `settings("CommandWheelSettings", command_wheel_settings)`, который доступен глобально как `CommandWheelSettings`.

## Параметры анимации

### `anim_speed`
Скорость анимации появления/исчезновения колеса.

**Тип:** `number`  
**Значение по умолчанию:** `25`  
**Единицы:** единицы прогресса в секунду

**Описание:** Определяет, насколько быстро колесо появляется и исчезает. Чем больше значение, тем быстрее анимация.

---

## Параметры радиусов

### `max_radius`
Внешний радиус расположения кнопок (расстояние от центра до центра иконки).

**Тип:** `number`  
**Значение по умолчанию:** `190`  
**Единицы:** пиксели

**Описание:** Определяет максимальное расстояние от центра экрана до центра иконок кнопок. Внешняя граница сегментов.

---

### `min_radius`
Внутренний радиус расположения кнопок.

**Тип:** `number`  
**Значение по умолчанию:** `150`  
**Единицы:** пиксели

**Описание:** Определяет минимальное расстояние от центра экрана. Внутренняя граница сегментов, определяет размер центрального круга с тенью.

**Примечание:** Разница `max_radius - min_radius` определяет радиальную глубину сегментов.

---

### `center_circle_size`
Размер центрального круга с тенью.

**Тип:** `number`  
**Значение по умолчанию:** `250`  
**Единицы:** пиксели

**Описание:** Размер фонового круга в центре колеса. Увеличьте это значение, чтобы сделать центральный круг больше.

---

## Параметры ромба

### `rhombus_width`
Ширина ромба, который появляется при наведении на кнопку.

**Тип:** `number` или `nil`  
**Значение по умолчанию:** `nil`

**Описание:** Если `nil`, используется `center_circle_size`. Можно настроить отдельно для более точного контроля размера ромба.

---

### `rhombus_height`
Высота ромба, который появляется при наведении на кнопку.

**Тип:** `number` или `nil`  
**Значение по умолчанию:** `nil`

**Описание:** Если `nil`, используется `center_circle_size * 0.256`. Можно настроить отдельно для более точного контроля размера ромба.

---

## Параметры hover (наведение)

### `hover_min_distance`
Минимальное расстояние от центра экрана для активации hover.

**Тип:** `number`  
**Значение по умолчанию:** `130`  
**Единицы:** пиксели (с учетом scale)

**Описание:** Определяет минимальное расстояние курсора от центра экрана, при котором начинается проверка hover. Увеличьте это значение, если ромб появляется слишком рано.

---

### `hover_angle_degrees`
Угловая ширина зоны hover для каждой кнопки.

**Тип:** `number`  
**Значение по умолчанию:** `30`  
**Единицы:** градусы

**Описание:** Определяет ширину угловой зоны активации hover для каждой кнопки. Чем больше значение, тем шире зона активации hover.

---

### `hover_grace_period`
Период "милосердия" для срабатывания действия после отведения курсора.

**Тип:** `number`  
**Значение по умолчанию:** `0.1`  
**Единицы:** секунды

**Описание:** Если курсор был на кнопке, но быстро отведен, действие все равно сработает в течение этого периода. Уменьшите это значение, если действия срабатывают слишком долго после отведения курсора.

---

### `scan_delay`
Задержка между сканированием сегментов.

**Тип:** `number`  
**Значение по умолчанию:** `0.1`  
**Единицы:** секунды

**Описание:** Увеличьте это значение, если сегменты появляются слишком быстро.

---

## Параметры колеса

### `wheel_slots`
Количество слотов для кнопок в колесе.

**Тип:** `number`  
**Значение по умолчанию:** `13`

**Описание:** Максимальное количество кнопок, которые могут быть отображены в колесе одновременно.

---

## Параметры сегментов

### `slice_width`
Угловая ширина сегмента.

**Тип:** `number`  
**Значение по умолчанию:** `117`  
**Единицы:** пиксели

**Описание:** Влияет на ширину кнопок и промежутки между ними. Чем меньше `slice_width`, тем уже кнопки и больше промежутки. Чем больше `slice_width`, тем шире кнопки и меньше промежутки (может привести к перекрытию).

---

### `slice_height`
Радиальная глубина сегмента.

**Тип:** `number`  
**Значение по умолчанию:** `135`  
**Единицы:** пиксели

**Описание:** Влияет на кривизну внутренней и внешней границ. Чем больше `slice_height`, тем более изогнуты границы (больше радиальная глубина). Чем меньше `slice_height`, тем менее изогнуты границы (меньше радиальная глубина).

---

### `slice_uv_left`
Левая граница обрезки UV координат.

**Тип:** `number`  
**Значение по умолчанию:** `0.0`  
**Диапазон:** `0.0` - `1.0`

**Описание:** Обрезка краев текстуры для создания промежутков между кнопками. `0.0` = без обрезки, `0.1` = обрезать 10% слева.

---

### `slice_uv_right`
Правая граница обрезки UV координат.

**Тип:** `number`  
**Значение по умолчанию:** `1.0`  
**Диапазон:** `0.0` - `1.0`

**Описание:** Обрезка краев текстуры для создания промежутков между кнопками. `1.0` = без обрезки, `0.9` = обрезать 10% справа.

---

### `slice_uv_top`
Верхняя граница обрезки UV координат.

**Тип:** `number`  
**Значение по умолчанию:** `0.1`  
**Диапазон:** `0.0` - `1.0`

**Описание:** Обрезка краев текстуры сверху.

---

### `slice_uv_bottom`
Нижняя граница обрезки UV координат.

**Тип:** `number`  
**Значение по умолчанию:** `1.0`  
**Диапазон:** `0.0` - `1.0`

**Описание:** Обрезка краев текстуры снизу.

---

### `slice_curvature_scale_x`
Масштаб кривизны по ширине.

**Тип:** `number`  
**Значение по умолчанию:** `1.0`

**Описание:** Изменяет визуальную кривизну без изменения логических размеров кнопок. `1.0` = без изменений, `>1.0` = более изогнуто, `<1.0` = менее изогнуто.

---

### `slice_curvature_scale_y`
Масштаб кривизны по высоте.

**Тип:** `number`  
**Значение по умолчанию:** `1.0`

**Описание:** Изменяет визуальную кривизну без изменения логических размеров кнопок. `1.0` = без изменений, `>1.0` = более изогнуто, `<1.0` = менее изогнуто.

---

## Параметры иконок

### `icon_size`
Размер иконки на кнопке.

**Тип:** `number`  
**Значение по умолчанию:** `80`  
**Единицы:** пиксели

**Описание:** Размер иконки в пикселях (ширина и высота одинаковые).

---

## Параметры линии

### `line_width`
Угловая ширина линии (внешняя граница сегмента).

**Тип:** `number`  
**Значение по умолчанию:** `200`  
**Единицы:** пиксели

**Описание:** Влияет на ширину визуальной границы сегментов.

---

### `line_height`
Радиальная высота линии.

**Тип:** `number` или `nil`  
**Значение по умолчанию:** `147`

**Описание:** Если `nil`, вычисляется автоматически на основе `(max_radius - min_radius) * line_height_scale`.

---

### `line_height_scale`
Масштаб для автоматического вычисления высоты линии.

**Тип:** `number`  
**Значение по умолчанию:** `2.5`

**Описание:** Используется для вычисления `line_height`, если он не задан явно. Чем больше значение, тем выше линия (дальше от кнопок).

---

## Параметры цветов

Все цвета задаются в формате RGBA: `[alpha, red, green, blue]`, где все значения от 0 до 255.

### `background_color`
Цвет фона (центральный круг с тенью).

**Тип:** `table`  
**Значение по умолчанию:** `{255, 0, 0, 0}` (черный)

---

### `rhombus_color`
Цвет ромба, который появляется при наведении на кнопку.

**Тип:** `table`  
**Значение по умолчанию:** `{120, 0, 0, 0}` (темно-серый)

---

### `button_color_default`
Базовый цвет сегментов кнопок.

**Тип:** `table`  
**Значение по умолчанию:** `{190, 0, 0, 0}` (серый)

---

### `button_color_hover`
Цвет сегментов кнопок при наведении.

**Тип:** `table`  
**Значение по умолчанию:** `{220, 0, 0, 0}` (более яркий серый)

---

### `icon_color_default`
Цвет иконок по умолчанию.

**Тип:** `table` или `nil`  
**Значение по умолчанию:** `nil`

**Описание:** Если `nil`, используется цвет из игры (`color_tint_main_3`).

---

### `icon_color_hover`
Цвет иконок при наведении.

**Тип:** `table` или `nil`  
**Значение по умолчанию:** `nil`

**Описание:** Если `nil`, используется цвет из игры (`color_tint_main_2`).

---

### `line_color_default`
Цвет линии (внешняя граница сегментов) по умолчанию.

**Тип:** `table` или `nil`  
**Значение по умолчанию:** `nil`

**Описание:** Если `nil`, используется цвет из игры (`color_tint_main_2`).

---

### `line_color_hover`
Цвет линии при наведении.

**Тип:** `table` или `nil`  
**Значение по умолчанию:** `nil`

**Описание:** Если `nil`, используется цвет из игры (`color_tint_main_1`).

---

## Использование

Настройки доступны глобально через `CommandWheelSettings` после загрузки файла. Используются в:
- `command_wheel_definitions.lua` - для определения размеров и цветов виджетов
- `HudElementCommandWheel.lua` - для логики отображения и поведения

## Рекомендации по настройке

- Для компактного расположения: уменьшите `max_radius`, `min_radius`, `center_circle_size`
- Для большего размера: увеличьте все радиусы пропорционально
- Для более широких кнопок: увеличьте `slice_width` и уменьшите разницу между `slice_uv_left` и `slice_uv_right`
- Для более узких кнопок: уменьшите `slice_width` и увеличьте разницу между `slice_uv_left` и `slice_uv_right`

